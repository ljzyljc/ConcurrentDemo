### 高性能限流器Guava RateLimiter


经典限流算法：令牌桶算法

Guava采用的是令牌桶算法，其核心是要通过限流器，必须拿到令牌。也就是说只要我们能够限制发牌的速率，那么就能控制流速了。

令牌桶算法的详细描述如下：

    1.令牌以固定的速率添加到令牌桶中，假设限流的速率是r/秒，则令牌每1/r秒会添加一个；
    
    2.假设令牌桶的容量是b,如果令牌桶已满，则新的令牌会丢弃；
    
    3.请求能够通过限流器的前提是令牌桶中有令牌
    
    
关键是**记录并动态计算下一个令牌发放的时间**

只需要记录下一个令牌产生的时间，并动态更新它，就能够轻松完成限流功能。
    
    
具体实现看代码


令牌桶算法和漏桶算法